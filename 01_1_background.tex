%------------------------------------------------
\section{Background on epidemiological models}
%------------------------------------------------
\begin{frame}[t,label=abm_1]
	\frametitle{Background: epidemiological models}
	\tikzstyle{background grid}=[draw, black!50,step=.5cm]
	%
	What are compartmental epidemiological models?\\
	%
	\begin{columns}[t] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment
		\begin{column}{.4\textwidth} % Left column and width
			\small
			\only<-6>{
				\begin{itemize}
					\uncover<2->{\item Described by a \emph{stochastic} process}%
					\uncover<4->{\item Assumes \emph{homogenous} interaction}
					\uncover<5->{\item Deterministic response for large $N$}
				\end{itemize}
				%
				\uncover<6->{
					\begin{equation*}
						\label{eq:SIRodes}
						\begin{aligned}
							&{\frac {dS}{dt}}=-{\frac {\beta IS}{N}},\\[6pt]
							&{\frac {dI}{dt}}={\frac {\beta IS}{N}}-\gamma I,\\[6pt]
							&{\frac {dR}{dt}}=\gamma I,
						\end{aligned}
					\end{equation*}
					{\scriptsize where $N = S + I + R$, $\beta$ controls infection spread, and $\gamma$ controls recovery rate}
				}%
			}%
			\only<7->{
				\begin{itemize}
					\item[\color{darkgreen} \ding{51}]<7-> Analytical solutions are available
					\item[\color{darkgreen} \ding{51}]<8-> Captures large-scale population dynamics
					\item[\color{red} \ding{56}]<9-> Does not account for \emph{geography}
					\item[\color{red} \ding{56}]<10-> Cannot model effect of intervention policies
				\end{itemize}
			}%
			%
		\end{column}
		%
		\begin{column}{.6\textwidth} % Left column and width

			\only<1>{
				\def\framel{1}
				\def\framep{1}
				\def\frameabm{1}
			}%
			\only<2>{
				\def\framel{1}
				\def\framep{2}
				\def\frameabm{1}
			}%
			\only<3>{
				\def\framel{1}
				\def\framep{2}
				\def\frameabm{1}
			}%
			\only<4-8>{
				\def\framel{1}
				\def\framep{2}
				\def\frameabm{2}
			}%
			\only<9->{
				\def\framel{1}
				\def\framep{2}
				\def\frameabm{3}
			}%

			\tikzstyle{background grid}=[draw, black!50,step=.1cm]
			\hspace*{5em}\raisebox{1em}{%
				\begin{tikzpicture}[scale=0.45, every node/.style={scale=0.45}, remember picture, overlay] %show background grid, 
						\input{schematics/legend}
						\input{schematics/model_process}
						\only<3->{\input{schematics/agent_based_model}}
				\end{tikzpicture}%
			}%
			\begin{tikzpicture}[remember picture, overlay] %show background grid, 
				\node [inner sep=0pt,above right, opacity=1.0]  at (-0.13\textwidth,-0.66\textheight) (seir) 
					{
						\only<6>{\includegraphics[width=0.9\textwidth]{SIR_example.pdf}}%
					};
			\end{tikzpicture}%
		\end{column}

	\end{columns}
	\vspace{-3em}
\end{frame}
%------------------------------------------------
\begin{frame}[t,label=abm_2]
	\frametitle{Background: epidemiological models}
	\tikzstyle{background grid}=[draw, black!50,step=.5cm]
	%
	What are agent-based epidemiological models?\\
	%
	\begin{columns}[t] % The "c" option specifies centered vertical alignment while the "t" option is used for top vertical alignment
		\begin{column}{.4\textwidth} % Left column and width
			\small
			\only<-12>{
				\begin{itemize}
					\uncover<2->{\item \emph{Stochastic} process}%
					\uncover<3->{\item Assume \emph{heterogenous} interaction}
					\uncover<5-12>{\item Stochastic response}
				\end{itemize}
			}%
			\only<13->{
				\begin{itemize}
					\item[\color{darkgreen} \ding{51}]<13-> Account for \emph{geography} and \emph{demographics}
					\item[\color{darkgreen} \ding{51}]<14-> Describe local phenomena
					\item[\color{darkgreen} \ding{51}]<15-> Can be used to model intervention policies
					\item[\color{red} \ding{56}]<16-> Stochastic response makes decision making challenging
					\item[\color{red} \ding{56}]<17-> Computationally expensive
				\end{itemize}
			}%
			%
		\end{column}
		%
		\begin{column}{.6\textwidth} % Left column and width

			\only<1>{
				\def\framel{1}
				\def\framep{2}
				\def\frameabm{1}
			}%
			\only<2>{
				\def\framel{2}
				\def\framep{3}
				\def\frameabm{1}
			}%
			\only<3>{
				\def\framel{2}
				\def\framep{3}
				\def\frameabm{4}
			}%
			\only<4-14>{
				\def\framel{2}
				\def\framep{3}
				\def\frameabm{5}
			}%
			\only<15->{
				\def\framel{2}
				\def\framep{4}
				\def\frameabm{6}
			}%
			\tikzstyle{background grid}=[draw, black!50,step=.1cm]
			\only<-4,13->{
				\hspace*{5em}\raisebox{1em}{%
					\begin{tikzpicture}[scale=0.45, every node/.style={scale=0.45}, remember picture, overlay] %show background grid, 
							\input{schematics/legend}
							\input{schematics/model_process}
							\input{schematics/agent_based_model}
					\end{tikzpicture}%
				}%
			}%
			%
			\begin{tikzpicture}[remember picture, overlay] %show background grid, 
				\node [inner sep=0pt,above right, opacity=1.0]  at (0.1\textwidth,-0.66\textheight) (abm) 
					{
						\only<5>{
							\begin{animateinline}[autoplay,width=0.9\textwidth]{60}
								\ifshowanimations
									\multiframe{77}{i=5+45}{%
										\includegraphics{render_demo_1_realization_1/sim_\i.pdf}
									}
								\else
									\multiframe{1}{i=3500+0}{%
										\includegraphics{render_demo_1_realization_1/sim_\i.pdf}
									}
								\fi
							\end{animateinline}%
						}%
						\only<6>{
							\begin{animateinline}[autoplay,width=0.9\textwidth]{60}
								\ifshowanimations
									\multiframe{77}{i=5+45}{%
										\includegraphics{render_demo_1_realization_2/sim_\i.pdf}
									}
								\else
									\multiframe{1}{i=3500+0}{%
										\includegraphics{render_demo_1_realization_2/sim_\i.pdf}
									}
								\fi
							\end{animateinline}%
						}%
					};
				\only<5>{\node[inner sep=0pt,align=flush center,above=\belowcaptionskip of abm,text width=\linewidth]
					{\vspace{-1em}{\large Realization 1}};}%
				\only<6>{\node[inner sep=0pt,align=flush center,above=\belowcaptionskip of abm,text width=\linewidth]
					{\vspace{-1em}{\large Realization 2}};}%
				%
				\node [inner sep=0pt,above right, opacity=1.0]  at (0.1\textwidth,-0.69\textheight) (trajectory) 
				{
					\only<7>{\includegraphics[width=0.85\textwidth]{realization_traces/I_compare_R_0.pdf}}%
					\only<8>{\includegraphics[width=0.85\textwidth]{realization_traces/I_compare_R_1.pdf}}%
					\only<9>{\includegraphics[width=0.85\textwidth]{realization_traces/I_compare_R_2.pdf}}%
					\only<10>{\includegraphics[width=0.85\textwidth]{realization_traces/I_compare_R_3.pdf}}%
					\only<11>{\includegraphics[width=0.85\textwidth]{realization_traces/I_compare_R_4.pdf}}%
					\only<12>{\includegraphics[width=0.85\textwidth]{realization_traces/I_compare_opt_0.pdf}}%
				};
				\only<7>{\node[inner sep=0pt,align=flush center,above=\belowcaptionskip of trajectory,text width=\linewidth]
					{\vspace{-1em}{\large Realization 1}};}%
				\only<8>{\node[inner sep=0pt,align=flush center,above=\belowcaptionskip of trajectory,text width=\linewidth]
					{\vspace{-1em}{\large Realization 2}};}%
			\end{tikzpicture}%
		\end{column}

	\end{columns}
	\vspace{-3em}
\end{frame}